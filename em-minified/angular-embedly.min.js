var angularEmbedly=angular.module("angular-embedly",[]);!function(e){e.provider("embedlyService",function(){function e(e){this.embed=function(t,n){var r=encodeURI(t),o="http://api.embed.ly/1/oembed?key="+d+"&url="+r;return"undefined"!=typeof n&&(o=o+"&maxwidth="+n),e({method:"GET",url:o})},this.extract=function(t){var n=encodeURI(t),r="http://api.embed.ly/1/extract?key="+d+"&url="+n;return e({method:"GET",url:r})}}var d;this.setKey=function(e){return d=e},this.getKey=function(){return d},this.$get=["$http",function(d){return new e(d)}]})}(angularEmbedly),function(e){e.controller("emEmbedCtrl",["$scope",function(e){e.embedCode=""}])}(angularEmbedly),function(e){e.directive("emEmbed",["embedlyService",function(e){return{restrict:"E",scope:{urlsearch:"@",maxwidth:"@"},controller:"emEmbedCtrl",link:function(d,t){d.loading_embedly=!1,d.$watch("urlsearch",function(n){var r=d.embedCode;n&&(d.loading_embedly=!0,e.embed(n,d.maxwidth).then(function(e){switch(d.loading_embedly=!1,e.data.type){case"video":d.embedCode=e.data.html;break;case"photo":d.embedCode='<img src="'+e.data.url+'">';break;default:d.embedCode=""}r!==d.embedCode&&t.html("<div>"+d.embedCode+"</div>")},function(){d.loading_embedly=!1;var e=d.embedCode;d.embedCode="",e!==d.embedCode&&t.html("<div>"+d.embedCode+"</div>")}))})}}}])}(angularEmbedly);