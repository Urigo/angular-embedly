var angularEmbedly=angular.module("angular-embedly",[]);!function(e){e.provider("embedlyService",function(){function e(){return n?"https":"https"}function t(t){this.embed=function(n,o,r){var a=encodeURIComponent(n),i=e()+"://api.embed.ly/1/oembed?key="+d+"&url="+a;return"undefined"!=typeof o&&(i=i+"&maxwidth="+o),"undefined"!=typeof r&&(i=i+"&scheme="+r),t({method:"GET",url:i})},this.extract=function(n){var o=encodeURIComponent(n),r=e()+"://api.embed.ly/1/extract?key="+d+"&url="+o;return t({method:"GET",url:r})}}var d,n;this.setKey=function(e){return d=e},this.getKey=function(){return d},this.secure=function(e){return e?(n=e,void 0):n},this.$get=["$http",function(e){return new t(e)}]})}(angularEmbedly),function(e){e.controller("emEmbedCtrl",["$scope",function(e){e.embedCode=""}])}(angularEmbedly),function(e){e.directive("emEmbed",["embedlyService",function(e){return{restrict:"E",scope:{urlsearch:"@",maxwidth:"@",scheme:"@",onempty:"&"},controller:"emEmbedCtrl",link:function(t,d){function n(){void 0!=t.onempty&&"function"==typeof t.onempty&&t.onempty()}t.$parent.loading_embedly=!1,t.$watch("urlsearch",function(o){var r=t.embedCode;o&&(t.$parent.loading_embedly=!0,e.embed(o,t.maxwidth,t.scheme).then(function(e){switch(t.$parent.loading_embedly=!1,e.data.type){case"video":void 0==e.data.html?n():t.embedCode=e.data.html;break;case"rich":void 0==e.data.html?n():t.embedCode=e.data.html;break;case"photo":void 0==e.data.url?n():t.embedCode=t.maxwidth?'<img style="max-width: '+t.maxwidth+'px;" src="'+e.data.url+'">':'<img src="'+e.data.url+'">';break;default:n(),t.embedCode=""}r!==t.embedCode&&d.html("<div>"+t.embedCode+"</div>")},function(){t.$parent.loading_embedly=!1;var e=t.embedCode;t.embedCode="",e!==t.embedCode&&d.html("<div>"+t.embedCode+"</div>")}))})}}}])}(angularEmbedly);