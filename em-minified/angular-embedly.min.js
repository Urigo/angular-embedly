var angularEmbedly=angular.module("angular-embedly",[]);!function(e){e.provider("embedlyService",function(){function e(e){this.embed=function(d,n){var r=encodeURI(d),o="http://api.embed.ly/1/oembed?key="+t+"&url="+r;return"undefined"!=typeof n&&(o=o+"&maxwidth="+n),e({method:"GET",url:o})},this.extract=function(d){var n=encodeURI(d),r="http://api.embed.ly/1/extract?key="+t+"&url="+n;return e({method:"GET",url:r})}}var t;this.setKey=function(e){return t=e},this.getKey=function(){return t},this.$get=["$http",function(t){return new e(t)}]})}(angularEmbedly),function(e){e.controller("emEmbedCtrl",["$scope",function(e){e.embedCode=""}])}(angularEmbedly),function(e){e.directive("emEmbed",["embedlyService",function(e){return{restrict:"E",scope:{urlsearch:"@",maxwidth:"@"},controller:"emEmbedCtrl",link:function(t,d){t.$parent.loading_embedly=!1,t.$watch("urlsearch",function(n){var r=t.embedCode;n&&(t.$parent.loading_embedly=!0,e.embed(n,t.maxwidth).then(function(e){switch(t.$parent.loading_embedly=!1,e.data.type){case"video":t.embedCode=e.data.html;break;case"photo":t.embedCode='<img src="'+e.data.url+'">';break;default:t.embedCode=""}r!==t.embedCode&&d.html("<div>"+t.embedCode+"</div>")},function(){t.$parent.loading_embedly=!1;var e=t.embedCode;t.embedCode="",e!==t.embedCode&&d.html("<div>"+t.embedCode+"</div>")}))})}}}])}(angularEmbedly);